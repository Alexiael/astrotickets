---
type Variant = "primary" | "ghost";

interface Props {
  variant?: Variant;
  as?: "button" | "a";
  href?: string;
  class?: string;
  [key: string]: any;
}

const {
  variant = "primary",
  as = "button",
  href = "#",
  class: extra = "",
  ...rest
} = Astro.props as Props;

const base =
  "inline-flex items-center justify-center px-4 py-2 rounded-md text-sm font-semibold tracking-wide transition " +
  "focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black " +
  "disabled:opacity-40 disabled:cursor-not-allowed";

const variants: Record<Variant, string> = {
  primary:
    "bg-[color:var(--color-accent)] text-white " +
    "hover:bg-[color:var(--color-accent-soft)] " +
    "focus:ring-[color:var(--color-accent-soft)]",

  ghost:
    "border border-[color:var(--color-border-accent)] " +
    "text-[color:var(--color-accent-soft)] " +
    "hover:bg-[color:var(--color-accent-muted)]/20 " +
    "focus:ring-[color:var(--color-accent-soft)]",
};

const classes = `${base} ${variants[variant]} ${extra}`;
---

{as === "a" ? (
  <a href={href} class={classes} {...rest}>
    <slot />
  </a>
) : (
  <button class={classes} {...rest}>
    <slot />
  </button>
)}
